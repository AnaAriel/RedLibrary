<!DOCTYPE html> 
<html lang="pt-BR"> 
<head>
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <title>RedLibrary - Início</title> 
  <link rel="stylesheet" href="/static/css/style.css"> 
  <script defer src="/static/js/ui.js"></script>
</head>
<body> 

  <div class="library-container">
    <header class="navbar"> 
      <a class="brand" href="/">
        <img class="brand__logo" src="/static/images/logo_branca.png" alt="RedLibrary"> 
        <span class="brand__text">RedLibrary</span> 
      </a>

      <form class="search" method="get" action="/search">
        <div class="search__wrapper">
        <input class="search__input" type="text" name="keyword" placeholder="Buscar por título" required>
        <input type="hidden" id="search_by" name="search_by" value="title">
        <button class="search-button" type="submit">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <circle cx="9" cy="9" r="8" stroke="white" stroke-width="2"/>
          <path d="m21 21-4.35-4.35" stroke="white" stroke-width="2"/>
        </svg>
      </button>
        </div>
      </form>

     <div class="profile-area">
      <div class="profile">
        <button id="btn-profile" class="profile__button" type="button" aria-haspopup="true" aria-expanded="false">
          <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
              <circle cx="20" cy="20" r="17.33" stroke="white" stroke-width="2.67"/>
              <circle cx="20" cy="16" r="5.33" stroke="white" stroke-width="2.67"/>
              <path d="M9.33 33.33c0-6.67 4.67-10.67 10.67-10.67s10.67 4 10.67 10.67" stroke="white" stroke-width="2.67"/>
          </svg>
        </button>

        <nav id="menu-profile" class="profile__menu">
          {% if user_id %}
            <!-- Usuário logado -->
            <a class="profile__link" href="/logout">Sair</a>
          {% else %}
            <!-- Usuário NÃO logado -->
            <a class="profile__link" href="/login">Fazer login</a>
            <a class="profile__link" href="/register">Criar conta</a>
          {% endif %}
        </nav>
      </div>

      {% if user_id %}
        <!-- Ícone de estante visível apenas quando o usuário está logado -->
        <div class="shelf-icon">
          <a href="/shelf" title="Minha estante">
            <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 19h16M4 5h16M8 5v14M16 5v14"/>
            </svg>
          </a>
        </div>
      {% endif %}
</div>

    </header>
    

    <main class="container">
      <div class="section-books">
        <div class="grid">
          {% for book in featured_books %}
          <article class="card"
            data-cover="{{ book.thumbnail or '/static/images/logo.png' }}"
            data-title="{{ book.title }}"
            data-authors="{{ book.authors|join(', ') if book.authors else 'Desconhecido' }}"
            data-publisher="{{ book.publisher or '—' }}"
            data-pages="{{ book.pageCount or '—' }}"
            data-date="{{ book.publishedDate | format_date or '—' }}"
            data-description="{{ book.description or 'Sem descrição disponível' }}">

            <a class="card__thumb" href="javascript:void(0);">
              <img class="card__img" src="{{ book.thumbnail or '/static/images/logo.png' }}" alt="Capa de {{ book.title }}">
            </a>
            <div class="card__body">
              <h3 class="card__title">{{ book.title }}</h3>
              <p class="card__meta">{{ book.authors|join(', ') }}</p>
            </div>
          </article>
          {% endfor %}
        </div>
      </div>
   </main>

       </main>
  </div>

  <!-- Modal de detalhes do livro -->
  <div id="book-modal" class="modal">
    <div class="modal-content">
      <span class="modal-close">&times;</span>

      <div class="modal-body">
        <img id="modal-cover" class="modal-cover" src="" alt="Capa do livro">
        <div class="modal-info">
          <h2 id="modal-title"></h2>
          <div class="info-block">
            <p><strong>Autor(a):</strong> <span id="modal-author"></span></p>
            <p><strong>Editora:</strong> <span id="modal-publisher"></span></p>
            <p><strong>Páginas:</strong> <span id="modal-pages"></span></p>
            <p><strong>Data de publicação:</strong> <span id="modal-date"></span></p>
          </div>
          <div class="info-block">
            <p><strong>Sinopse:</strong></p>
            <p id="modal-description"></p>
          </div>
        </div>
      </div>
    </div>
  </div>

</body>
</html>


</body>
</html>
